# 多线程

### 简介

> Java多线程是指在Java编程语言中使用多个线程同时执行任务的能力。它允许程序在同一时间执行多个独立的任务，每个任务在独立的线程中运行，这些线程可以并行执行，从而提高程序的性能和响应性
>
> 
>
> 1. 提高性能：通过允许多个任务并行执行，可以更好地利用多核处理器，加快程序的运行速度。
> 2. 提高响应性：多线程可以使程序在执行长时间任务的同时仍能响应用户输入，提高用户体验。
> 3. 简化编程：某些任务需要同时执行多个操作，如网络通信、并行计算等，使用多线程可以更容易地管理这些复杂性。
> 4. 支持并发编程：多线程使得编写并发程序更容易，可以更好地处理共享资源的同步和互斥问题
>
> 
>
> 需要注意的是，尽管多线程提供了很多优势，但也引入了新的编程挑战，如线程安全性、死锁等问题，因此需要小心谨慎地设计和管理多线程程序，以确保它们正确运行

### 线程的生命周期

##### New (新建状态)

> 当线程对象被创建但尚未启动时，线程处于新建状态。在这个状态下，线程对象已经被创建，但还没有调用其`start()`方法

##### Runnable (可运行状态)

> 一旦线程调用了`start()`方法，线程就会进入可运行状态，在这个状态下，线程已经准备好运行，但还没有被分配到CPU时间片，多个可运行状态的线程可能会竞争CPU时间

Blocked (阻塞状态)

> 线程可以进入阻塞状态，例如等待某个锁、等待输入/输出操作完成或等待其他条件满足，线程在这种状态下被阻止执行，直到某个条件得到满足

##### Waiting (等待状态)

> 线程可以进入等待状态，等待特定的条件发生。线程可以通过`Object.wait()`、`Thread.join()`、`LockSupport.park()`等方法进入等待状态

##### Timed Waiting (定时等待状态)

线程可以进入有超时限制的等待状态，等待一段时间后会自动恢复到可运行状态，线程可以通过`Thread.sleep()` `Object.wait(long timeout)` `Thread.join(long millis)` `LockSupport.parkNanos()`等方法进入这个状态

##### Terminated (终止状态)

> 线程进入终止状态，表示线程已经执行完毕或出现了异常而终止。一旦线程完成任务或抛出未捕获的异常，它就会进入终止状态

### run()和start()

> `run()` 不会启动线程，只是普通的调用方法而已，不会分配新的分支栈(这种方式就是单线程)
>
> `start()` 会启动一个分支线程，在JVM中开辟一个新的栈空间，这段代码任务完成之后，瞬间就结束了，目的是为了开启一个新的栈空间(`分支栈`)，只要新的栈空间开出来，start()方法就结束了，线程就启动成功了
>
> 启动成功的线程会自动调用run方法，并且`run()`会在`分支栈`的栈底部(压栈)，`main()`会在`主栈`的栈底部
>
> run()和main()是平级并行关系(多线程)

### 线程构造方法

| 构造方法名                                 |
| ------------------------------------------ |
| Thread()                                   |
| Thread(String threadName)                  |
| Thread(Runnable target)                    |
| Thread(Runnable target, String threadName) |

