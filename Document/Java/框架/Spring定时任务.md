# Spring定时任务



------



1. 在服务启动类上添加 `@EnableScheduling` 注解开启定时任务支持
2. 在方法上添加  `@Scheduled` 注解
3. 配置`@Scheduled`注解属性



------



### `cron`

指定任务的调度规则，使用 cron 表达式来定义

Cron 表达式是一种用于指定定时任务调度规则的字符串表达方式。它由多个时间字段组成，用空格分隔。每个时间字段表示一个时间单位，可以使用特定的符号或值来指定时间

Cron 表达式的常见格式为：`秒 分 时 日 月 周 年`，其中年字段是可选的。下面是每个时间字段的取值范围和符号：

1. 秒（0-59）
2. 分（0-59）
3. 时（0-23）
4. 日（1-31）
5. 月（1-12 或 JAN-DEC）
6. 周（1-7 或 SUN-SAT），其中 1 表示周日，2 表示周一，以此类推
7. 年（可选）（1970-2099）

以下是一些常用的 Cron 表达式示例：

- `0 * * * * *`：每分钟的第 0 秒执行任务
- `0 0 * * * *`：每小时的第 0 分钟和第 0 秒执行任务
- `0 0 8 * * *`：每天上午 8 点的第 0 分钟和第 0 秒执行任务
- `0 0 12 * * MON-FRI`：每个工作日中午 12 点的第 0 分钟和第 0 秒执行任务
- `0 0 6,18 * * *`：每天上午 6 点和下午 6 点的第 0 分钟和第 0 秒执行任务
- `0 0/15 * * * *`：每小时的每 15 分钟开始执行任务
- `0 0 9-17 * * MON-FRI`：每个工作日上午 9 点到下午 5 点的第 0 分钟和第 0 秒执行任务

除了上述基本的时间字段取值方式，Cron 表达式还支持以下特殊符号：

- `*`：匹配任意值，表示该字段可以是任意取值
- `?`：用于天和周字段，表示不指定具体的值，可以用于解决天和周之间的冲突
- `/`：用于指定增量步长，例如 `0/5` 表示从 0 开始，每隔 5 个单位执行一次
- `,`：用于列举多个取值，例如 `MON,WED,FRI` 表示周一、周三和周五
- `-`：用于指定一个范围，例如 `10-15` 表示从 10 到 15
- `L`：用于日和周字段，表示最后的取值，例如 `15L` 表示每个月的最后一天或每个周的最后一个匹配的日
- `W`：用于工作日计算，表示最近的工作日，例如 `15W` 表示最近的工作日到 15 日
- `#`：用于周字段，表示指定月份的第几个周几，例如 `2#3` 表示某个月的第三个周二



------



`fixedDelay`

指定任务执行之间的固定延迟时间，单位为毫秒。每次任务执行完成后，会等待指定的延迟时间，然后再次执行任务



------



`fixedRate`

指定任务执行的固定间隔时间，单位为毫秒。无论任务的执行时间如何，都会按照指定的间隔时间触发并执行下一个任务



------



`initialDelay`

指定任务首次执行的延迟时间，单位为毫秒。在应用程序启动后，会等待指定的延迟时间后执行第一次任务



------



`zone`

指定任务执行的时区，默认为系统默认时区。可以通过指定时区来确保任务在特定的时区执行



------

