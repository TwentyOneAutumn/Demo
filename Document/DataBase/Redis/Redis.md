# Redis

## 分槽(slot)

#### 槽位数量

> `Redis Cluster`将整个数据集划分为`16384`个槽位，编号从`0`到`16383`，这个槽位数量是固定的，无论集群中有多少个节点，都将数据均匀地划分在这些槽位上

> 例如现在有三台Master节点，每个每个节点有一个Slave节点，哈希槽分配情况如下：
>
> - Master 1: 槽位范围 [0, 5460]
> - Master 2: 槽位范围 [5461, 10922]
> - Master 3: 槽位范围 [10923, 16383]

#### 数据分片

> 当你往`Redis Cluster`写入数据时，系统会根据key(有效值)计算哈希值，把结果对`16384`求余数，然后确定该键属于哪个槽位,最终数据会被存储在对应槽位的节点上

#### 槽位迁移

> 当槽位的分配发生变化时，`Redis Cluster`会触发槽位迁移，这涉及到将某个槽位的数据从一个节点迁移到另一个节点，槽位迁移是一个自动化的过程，会确保在迁移期间数据的一致性